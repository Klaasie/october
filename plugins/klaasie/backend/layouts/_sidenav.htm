<?php
    $context = BackendMenu::getContext();
    $contextSidenav = BackendMenu::getContextSidenavPartial($context->owner, $context->mainMenuCode);
?>
<?php if (!$contextSidenav): ?>
    <?php
        $sideMenuItems = BackendMenu::listSideMenuItems();
    ?>
    <?php if ($sideMenuItems): ?>
        <div class="kb-menu kb-sidenav-container">
            <div id="layout-sidenav"
                 class="kb-menu-wrapper kb-sidenav-wrapper"
                 data-active-class="active"
                 data-control="sidenav">
                <ul
                    class="kb-menu-list kb-sidenav">
                    <?php foreach ($sideMenuItems as $sideItemCode => $item): ?>
                        <?php $isActive = BackendMenu::isSideMenuItemActive($item) ? 'active' : null; ?>
                        <li class="kb-menu-list-item <?= $isActive ?>" <?= Html::attributes($item->attributes) ?>>
                            <a
                                href="<?= $item->url ?>"
                                class=""
                            >
                                <span class="menu-icon nav-icon">
                                    <?php if ($item->iconSvg): ?>
                                        <img class="svg-icon" src="<?= Url::asset($item->iconSvg) ?>" loading="lazy">
                                    <?php else: ?>
                                        <i class="<?= $item->iconSvg ? 'svg-replace' : null ?> <?= $item->icon ?>"></i>
                                    <?php endif ?>
                                </span>
                                <span class="menu-label nav-label">
                                    <?= e(trans($item->label)) ?>
                                </span>
                                <span
                                    class="counter <?= $item->counter === null ? 'empty' : null ?>"
                                    data-menu-id="<?= e($context->mainMenuCode.'/'.$sideItemCode) ?>"
                                    <?php if ($item->counterLabel): ?>title="<?= e(trans($item->counterLabel)) ?>"<?php endif ?>
                                >
                                    <?= e($item->counter) ?>
                                </span>
                            </a>
                        </li>
                    <?php endforeach ?>
                </ul>
            </div>
        </div>
    <?php endif ?>
<?php else: ?>
    <?= $this->makePartial($contextSidenav) ?>
<?php endif ?>
